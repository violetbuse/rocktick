{
  "db_name": "PostgreSQL",
  "query": "\n          WITH candidates AS (\n            SELECT\n              one_off.id\n            FROM one_off_jobs one_off\n            JOIN scheduled_jobs sched\n              ON sched.one_off_job_id = one_off.id\n            WHERE one_off.deleted_at IS NULL\n              AND NOT EXISTS (\n                SELECT 1\n                FROM scheduled_jobs sched_2\n                WHERE sched_2.one_off_job_id = one_off.id\n                  AND (\n                    sched_2.deleted_at IS NULL OR\n                    sched_2.deleted_At >= now() - interval '1 hours'\n                  )\n              )\n              GROUP BY one_off.id, one_off.tenant_id\n              LIMIT 10\n          )\n          SELECT\n            one_off.id as id,\n            one_off.request_id as req_id\n          FROM one_off_jobs one_off\n          JOIN candidates c\n            ON c.id = one_off.id\n          LIMIT 1 FOR UPDATE SKIP LOCKED;\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Varchar"
      },
      {
        "ordinal": 1,
        "name": "req_id",
        "type_info": "Varchar"
      }
    ],
    "parameters": {
      "Left": []
    },
    "nullable": [
      false,
      false
    ]
  },
  "hash": "7f427460fbeef455ffd22246db75218b933cdb346a4e1085bbb388a053022614"
}
